<div class="review-modal-container">
    <div class="full-modal">

        <!-- * ========== Header del Modal ========== -->
        <div class="header-modal">
            <h1>Change Password</h1>
            <span (click)="closeModal()">&#x2715;</span>
        </div>

        <form [formGroup]="passwordForm" (submit)="onSubmit()">
            
            <!-- * ========== Cuerpo del Modal ========== -->
            <div class="body-modal">
                
                <!-- ? --- Inputs del Cambio de ContraseÃ±a --- -->
                <div class="text-modal">

                    <!-- Old Password -->
                    <div class="input-group">
                        <label for="oldPassword">Current Password</label>
                        <input id="oldPassword" type="password" formControlName="oldPassword"/>

                        @if(passwordForm.get('oldPassword')?.touched 
                            && passwordForm.get('oldPassword')?.invalid){
                            <p class="error">Current password is required.</p>
                        }
                    </div>

                    <!-- New Password -->
                    <div class="input-group">
                        <label for="newPassword">New Password</label>
                        <input id="newPassword" type="password" formControlName="newPassword"/>

                        @if(passwordForm.get('newPassword')?.touched 
                            && passwordForm.get('newPassword')?.invalid){

                            @if(passwordForm.get('newPassword')?.hasError('required')){
                                <p class="error">New password is required.</p>
                            }

                            @if(passwordForm.get('newPassword')?.hasError('minlength')){
                                <p class="error">Password must be at least 8 characters.</p>
                            }
                        }
                    </div>

                    <!-- Confirm Password -->
                    <div class="input-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input id="confirmPassword" type="password" formControlName="confirmPassword"/>

                        @if(passwordForm.get('confirmPassword')?.touched 
                            && passwordForm.get('confirmPassword')?.invalid){
                            <p class="error">Please confirm the new password.</p>
                        }

                        <!-- Passwords mismatch -->
                        @if(passwordForm.get('newPassword')?.value 
                            && passwordForm.get('confirmPassword')?.value 
                            && passwordForm.get('newPassword')?.value !== passwordForm.get('confirmPassword')?.value){
                            <p class="error">Passwords do not match.</p>
                        }
                    </div>

                    <!-- Backend Error -->
                    @if(passwordError){
                        <p class="error">{{ passwordError }}</p>
                    }

                    <!-- Backend Success -->
                    @if(passwordSuccess){
                        <p class="success">{{ passwordSuccess }}</p>
                    }

                </div>
            </div>

            <!-- * ========== Footer del Modal ========== -->
            <div class="footer-modal">
                <button [disabled]="passwordForm.invalid" type="submit">
                    Change Password
                </button>
            </div>

        </form>

    </div>
</div>
